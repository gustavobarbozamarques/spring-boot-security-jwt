%% Login Flow
sequenceDiagram
    actor User
    User->>AuthController: POST /api/public/auth/login<br/>username|password<br/>LoginRequestDTO
    activate AuthController
    AuthController->>AuthenticationService: login()
    activate AuthenticationService
    AuthenticationService->>AuthenticationManager: authenticate()
    activate AuthenticationManager
    Note over AuthenticationManager: Handled by<br/>Spring Security
    AuthenticationManager->>UserDetailsServiceImpl: loadUserByUsername()
    activate UserDetailsServiceImpl
    UserDetailsServiceImpl->>UserRepository: findByUsername()
    activate UserRepository
    UserRepository-->>UserDetailsServiceImpl: User
    deactivate UserRepository
    UserDetailsServiceImpl-->>AuthenticationManager: UserDetails
    deactivate UserDetailsServiceImpl
    AuthenticationManager-->>AuthenticationService: Authentication
    deactivate AuthenticationManager
    AuthenticationService->>JwtService: generateJwtToken()
    activate JwtService
    JwtService-->>AuthenticationService: accessToken and refreshToken
    deactivate JwtService
    AuthenticationService-->>AuthController: LoginResponseDTO
    deactivate AuthenticationService
    AuthController-->>User: access_token<br/>refresh_token
    deactivate AuthController